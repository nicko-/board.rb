<%
def render_post id
  post = $db[:posts].where(:id => id).first
  content = "<div style=\"left: #{post[:depth] * 10}px;\" id=\"post\"><b>#{post[:author]}</b> - #{Time.at(post[:date]).to_s}<br>#{post[:content]}<br>"
  $db[:posts].where(:in_reply_to => id).each do |reply|
    content += render_post reply
  end
  content
end
%>

<%= render_post params[:id] %>